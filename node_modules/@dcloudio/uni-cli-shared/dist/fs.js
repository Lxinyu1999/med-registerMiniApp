"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.emptyDir = void 0;
const path_1 = require("path");
const fs_extra_1 = require("fs-extra");
const fs_1 = require("fs");
function emptyDir(dir, skip = []) {
    for (const file of (0, fs_extra_1.readdirSync)(dir)) {
        if (skip.includes(file)) {
            continue;
        }
        const abs = (0, path_1.resolve)(dir, file);
        // baseline is Node 12 so can't use rmSync :(
        if ((0, fs_extra_1.lstatSync)(abs).isDirectory()) {
            (0, fs_extra_1.emptyDirSync)(abs);
            (0, fs_1.rmdirSync)(abs);
        }
        else {
            (0, fs_extra_1.unlinkSync)(abs);
        }
    }
}
exports.emptyDir = emptyDir;
