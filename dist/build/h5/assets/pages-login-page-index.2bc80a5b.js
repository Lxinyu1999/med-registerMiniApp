import{d as a,o as e,c as s,w as t,a as c,l as i,a0 as n,B as o,v as r,a1 as d,P as l,T as u,m,Q as p,i as f}from"./index.be73a8e8.js";import{R as _}from"./request.df50e013.js";import{_ as b}from"./plugin-vue_export-helper.21dcd24c.js";var g=b(a({__name:"index",setup(a){function b(){uni.getUserProfile({desc:"获取个人信息",success:a=>{let{avatarUrl:e,nickName:s}=a.userInfo;n({success:a=>{o({title:"登陆中",mask:!0}),async function(a,e,s){try{let t={appid:"wx92e55b94661879c0",secret:"a2146ebb4cc0ce364d64decbda9c35b7",avatarUrl:a,nickName:e,code:s},c=await _.WxLogin(t);d("wxuser",c.data.data),setTimeout((()=>{l({delta:1}),u()}),600)}catch(t){r({title:"登录失败",icon:"none",duration:1e3})}}(e,s,a.code)},fail:a=>{r({title:"登录失败",icon:"none",duration:1e3})}})},fail:a=>{r({title:"登录失败",icon:"none",duration:1e3})}})}return(a,n)=>{const o=m,r=p,d=f;return e(),s(d,{class:"Login-page"},{default:t((()=>[c(o,{mode:"aspectFill",src:"https://diancan-1252107261.cos.accelerate.myqcloud.com/yiliao/denglu-yemian.jpg"}),c(r,{onClick:b},{default:t((()=>[i("授权登陆")])),_:1})])),_:1})}}}),[["__scopeId","data-v-0940b61a"]]);export{g as default};
